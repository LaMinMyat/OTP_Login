<!DOCTYPE html>
<html>
<head>
  <title>OTP Login</title>
</head>
<body>
  <h2>Login with Phone</h2>
  <input type="text" id="phoneNumber" placeholder="+959123456789"><br><br>
  <div id="recaptcha-container"></div><br>
  <button onclick="sendOTP()">Send OTP</button><br><br>

  <input type="text" id="otp" placeholder="Enter OTP"><br>
  <button onclick="verifyOTP()">Verify OTP</button>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAoAYbQdPkSQ13WvPUks4SXNQWRlptCUDI",
      authDomain: "otplogin-9a59f.firebaseapp.com",
      projectId: "otplogin-9a59f",
      storageBucket: "otplogin-9a59f.appspot.com",
      messagingSenderId: "889579746289",
      appId: "1:889579746289:web:3bb1585147b21410eb8a50"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <script>
    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
      size: 'normal',
      callback: (response) => {
        console.log("reCAPTCHA Verified");
      }
    });

    function sendOTP() {
      const phone = document.getElementById('phoneNumber').value;
      const appVerifier = window.recaptchaVerifier;

      firebase.auth().signInWithPhoneNumber(phone, appVerifier)
        .then((confirmationResult) => {
          window.confirmationResult = confirmationResult;
          alert("OTP Sent Successfully!");
        })
        .catch((error) => {
          alert("Error sending OTP: " + error.message);
        });
    }

    function verifyOTP() {
      const otp = document.getElementById('otp').value;
      window.confirmationResult.confirm(otp)
        .then((result) => {
          const user = result.user;
          alert("Login success: " + user.phoneNumber);
        })
        .catch((error) => {
          alert("Invalid OTP");
        });
    }
  </script>
</body>
</html>
